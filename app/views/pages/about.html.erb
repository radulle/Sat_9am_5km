<% actual_events = @country_events.where.not(id: 4) %>
<% head_info :title, t('navbars.top.about') %>
<% head_info :description, t('.description') %>
<h2><%= t 'navbars.top.about' %></h2>

<p><%= t '.description' %></p>

<h4><%= t '.how_to_join.title' %></h4>
<p>
  <%=
    t '.how_to_join.body_html',
      events_count: actual_events.size,
      events: actual_events.pluck(:name).to_sentence,
      info_email: 'info@s95.ru',
      telegram_group: 'https://t.me/sat9am5km'
  %>
</p>

<div class="row justify-content-sm-center">
  <div class="col-12 col-sm-10 col-md-8 col-lg-6">
    <div id="carouselControls" class="carousel slide my-3" data-bs-ride="carousel">
      <div class="carousel-inner">
        <% VkPhotos.call(7).each_with_index do |photo, idx| %>
          <div class="carousel-item <%= 'active' if idx.zero? %>">
            <img src="<%= photo %>" class="d-block w-100" alt="Кузьминки" loading="lazy">
          </div>
        <% end %>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#carouselControls" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden"><%= t '.back' %></span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselControls" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden"><%= t '.forward' %></span>
      </button>
    </div>
  </div>
</div>

<h4><%= t '.s95_abroad.title' %></h4>
<p>
  <%
    sentence =
      Event
        .where.not(country_code: top_level_domain)
        .unscope(:order)
        .distinct(:country_code)
        .pluck(:country_code)
        .map { |code| link_to t("country.#{code}"), "https://s95.#{code}/", target: '_blank', rel: 'noopener' }
        .to_sentence
  %>
  <%= raw t '.s95_abroad.body', countries: sentence, info_email: 'info@s95.ru' %>
</p>
