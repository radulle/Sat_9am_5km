# frozen_string_literal: true

attributes_table_for athlete do
  row :id
  row :parkrun_code
  row :fiveverst_code
  row :runpark_code
  row :parkzhrun_code
  row :gender
  row :club
  row :event
  row :user
  row('—Å–∞–π—Ç üå≥') { |a| athlete_external_link(a) }
end

results = athlete.results.includes(activity: :event).order('activities.date DESC')

panel "–ó–∞–±–µ–≥–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–≤—Å–µ–≥–æ #{results.size})" do
  table_for results do
    column('–ó–∞–±–µ–≥') { |r| link_to human_activity_name(r.activity), admin_activity_path(r.activity) }
    column :position
    column('–†–µ–∑—É–ª—å—Ç–∞—Ç') { |r| human_result_time r.total_time }
  end
end

volunteering = athlete.volunteering.includes(activity: :event)

panel "–í–æ–ª–æ–Ω—Ç—ë—Ä—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–≤—Å–µ–≥–æ #{volunteering.size})" do
  table_for volunteering do
    column('–ó–∞–±–µ–≥') { |v| link_to human_activity_name(v.activity), admin_activity_path(v.activity) }
    column('–†–æ–ª—å') { |v| human_volunteer_role v.role }
  end
end
